{% extends 'template.html.twig' %}

{% block title %}Nouvelle Liste de Cadeaux{% endblock %}

{% block stylesheets %}
    <style>
        .password-field-div {
            display: none;
        }
    </style>
{% endblock %}

{% block body %}
    <div class="flex justify-center items-center min-h-screen">
        <div class="bg-white p-8 rounded-lg shadow-lg w-full max-w-lg"> <!-- Augmentation de la largeur avec max-w-lg -->
            <h1 class="text-3xl font-bold text-center mb-6">Créer une nouvelle liste de cadeaux</h1>

            <!-- Inclusion du formulaire -->
            {{ form_start(form) }}
            
            <!-- Titre -->
            <div class="mb-4">
                {{ form_label(form.title, 'Titre de la liste') }}
                {{ form_widget(form.title, {'attr': {'class': 'block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500'}}) }}
                {{ form_errors(form.title) }}
            </div>

            <!-- Description -->
            <div class="mb-4">
                {{ form_label(form.description, 'Description') }}
                {{ form_widget(form.description, {'attr': {'class': 'block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500'}}) }}
                {{ form_errors(form.description) }}
            </div>

            <!-- Image -->
            <div class="mb-4">
                {{ form_label(form.image, 'Image (URL ou fichier)') }}
                {{ form_widget(form.image, {'attr': {'class': 'block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500'}}) }}
                {{ form_errors(form.image) }}
            </div>

            <!-- Statut (Privé ou Public) -->
            <div class="mb-4">
                {{ form_label(form.status, 'Privé') }}
                {{ form_widget(form.status) }}
                {{ form_errors(form.status) }}
            </div>

            <!-- Mot de passe -->
            <div class="mb-4 password-field-div">
                {{ form_label(form.password, 'Mot de passe') }}
                {{ form_widget(form.password, {'attr': {'class': 'block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500'}}) }}
                {{ form_errors(form.password) }}
            </div>

            <!-- Date de début -->
            <div class="mb-4">
                {{ form_label(form.beginDate, 'Date de début') }}
                {{ form_widget(form.beginDate, {'attr': {'class': 'block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500'}}) }}
                {{ form_errors(form.beginDate) }}
            </div>

            <!-- Date de fin -->
            <div class="mb-4">
                {{ form_label(form.endDate, 'Date de fin') }}
                {{ form_widget(form.endDate, {'attr': {'class': 'block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500'}}) }}
                {{ form_errors(form.endDate) }}
            </div>

            <!-- Thème -->
            <div class="mb-4">
                {{ form_label(form.theme, 'Thème de la liste') }}
                {{ form_widget(form.theme, {'attr': {'class': 'block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500'}}) }}
                {{ form_errors(form.theme) }}
            </div>

            <!-- Bouton de soumission -->
            <button type="submit" class="w-full bg-blue-900 text-white py-2 px-4 rounded-lg shadow hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                Créer la liste
            </button>

            {{ form_end(form) }}

            <!-- Bouton retour à la liste -->
            <div class="text-center mt-6">
                <a href="{{ path('app_gift_list_index') }}" class="inline-flex items-center px-6 py-3 bg-blue-900 text-white font-semibold rounded-lg shadow hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                    Retour à la liste
                </a>
            </div>
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const statusCheckbox = document.querySelector('#gift_list_status');
            const passwordDiv = document.querySelector('#gift_list_password').closest('.mb-3');

            // Masquer ou afficher le champ mot de passe en fonction de l'état de la case à cocher
            if (!statusCheckbox.checked) {
                passwordDiv.classList.add('password-field-div');
            } else {
                passwordDiv.classList.remove('password-field-div');
            }

            statusCheckbox.addEventListener('change', function() {
                if (this.checked) {
                    passwordDiv.classList.remove('password-field-div');
                } else {
                    passwordDiv.classList.add('password-field-div');
                }
            });
        });
    </script>
{% endblock %}
